@model CoachesIndexViewModel
@{
    ViewData["Title"] = "Coaches Page";
}




<div class="card shadow-sm">
    <div class="card-header">
        <h3 class="card-title">
            <div class="symbol symbol-50px me-4">
                <div class="symbol-label fs-2 fw-semibold text-success">
                    <!--begin::Svg Icon | path: /var/www/preview.keenthemes.com/kt-products/docs/metronic/html/releases/2023-01-30-131017/core/html/src/media/icons/duotune/communication/com014.svg-->
                    <span class="svg-icon svg-icon-muted svg-icon-2hx">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M16.0173 9H15.3945C14.2833 9 13.263 9.61425 12.7431 10.5963L12.154 11.7091C12.0645 11.8781 12.1072 12.0868 12.2559 12.2071L12.6402 12.5183C13.2631 13.0225 13.7556 13.6691 14.0764 14.4035L14.2321 14.7601C14.2957 14.9058 14.4396 15 14.5987 15H18.6747C19.7297 15 20.4057 13.8774 19.912 12.945L18.6686 10.5963C18.1487 9.61425 17.1285 9 16.0173 9Z" fill="currentColor" />
                            <rect opacity="0.3" x="14" y="4" width="4" height="4" rx="2" fill="currentColor" />
                            <path d="M4.65486 14.8559C5.40389 13.1224 7.11161 12 9 12C10.8884 12 12.5961 13.1224 13.3451 14.8559L14.793 18.2067C15.3636 19.5271 14.3955 21 12.9571 21H5.04292C3.60453 21 2.63644 19.5271 3.20698 18.2067L4.65486 14.8559Z" fill="currentColor" />
                            <rect opacity="0.3" x="6" y="5" width="6" height="6" rx="3" fill="currentColor" />
                        </svg>
                    </span>
                    <!--end::Svg Icon-->
                </div>
            </div>

            المدربين
        </h3>
        <div class="card-toolbar">
            <a type="button" class="btn btn-sm btn-primary js-render-modal" data-modal-title="Add Category" data-url="/categories/create">
                <i class="bi bi-plus-square-dotted"></i>
                اضافة
            </a>
        </div>
    </div>
    <div class="card-body">

        @if (!Model.Coaches.Any())
        {
                <div class="alert alert-dismissible bg-light-warning border border-danger border-dashed d-flex flex-column flex-sm-row w-100 p-5 mb-10 ">
                <!--begin::Icon-->
                <!--begin::Svg Icon | path: icons/duotune/communication/com003.svg-->
                <!--begin::Svg Icon | path: /var/www/preview.keenthemes.com/kt-products/docs/metronic/html/releases/2023-01-26-051612/core/html/src/media/icons/duotune/general/gen044.svg-->
    <span class="svg-icon  svg-icon-2hx svg-icon-warning">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <rect opacity="0.3" x="2" y="2" width="20" height="20" rx="10" fill="currentColor" />
                        <rect x="11" y="14" width="7" height="2" rx="1" transform="rotate(-90 11 14)" fill="currentColor" />
                        <rect x="11" y="17" width="2" height="2" rx="1" transform="rotate(-90 11 17)" fill="currentColor" />
                    </svg>
                </span>
                <!--end::Svg Icon-->                  <!--end::Icon-->
                <!--begin::Content-->
                <div class="d-flex flex-column pe-0 pe-sm-10 align-self-center ms-3">
                    <h4 class="fw-semibold">لم يتم اضافة بيانات بعد</h4>
                </div>
                <!--end::Content-->

            </div>

        }
        else
        {
            <div class="table-responsive">
                <table class="table table-row-dashed table-row-gray-300 gy-7">
                    <thead>
                        <tr class="fw-bold fs-6 text-gray-800">
                            <th>الصورة الرئيسية</th>
                            <th>الاسم</th>
                            <th>البريد الالكتروني</th>
                            <th>الحالة</th>
                            <th>تاريخ الاضافة</th>
                            <th>العملية</th>
                        </tr>
                    </thead>
                    <tbody id="modalTableBody">
                        @foreach (var coach in Model.Coaches)
                        {
                            <partial name="_CoachRow" model="coach"></partial>
                        }
                    </tbody>
                </table>
            </div>

        }

    </div>

</div>


@section Scripts{

    <script defer>
        document.querySelector('body').addEventListener('click', function (event) {
            if (event.target.classList.contains('js-toggle-btn')) {
                event.preventDefault();
                let id = event.target.dataset.id;

                Swal.fire({
                    title: 'هل انت متأكد ؟',
                    text: "هل انت متأكد من تغيير حالة المدرب ؟",
                    icon: 'warning',
                    showCancelButton: true,
                    confirmButtonColor: '#d33',
                    cancelButtonColor: '#3085d6',
                    confirmButtonText: 'نعم,متأكد',
                    cancelButtonText: 'الغاء',
                }).then((result) => {
                    if (result.isConfirmed) {
                        ToggleStatus(id);

                    }
                })
            }
        });


         function ToggleStatus(id) {
            fetch(`/Admin/Coaches/ToggleStatus/${id}`, {
                method: 'post',
                headers: {
                    'Content-Type': 'application/json',

                },

            }).then(res => res.json()).then(data => {
                console.log(data);
                showToastrInfoMessage('تم تحديث الحالة بنجاح !')
                //UpdateStatusLabelForCategory(data);

            })
                .catch(err => {
                    console.log(err);
                    showToastrErrorMessage();
                });
        }
    </script>
}
